!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n){let t=2,o=!1,i=[],a=!0;var r=new Konva.Stage({container:"container",width:500,height:650}),l=new Konva.Layer;r.add(l);var d=new Konva.Rect({x:0,y:0,width:500,height:650,fill:"#EC808D"});l.add(d);var c=new Konva.Rect({x:90,y:175,width:300,height:300,fill:"#FACD91"}),f=new Konva.Text({x:100,y:265,text:"开始游戏前，让我们先\n来了解下什么是光的\n             反射？",fontSize:28,fill:"#333",storke:"#333"});function s(){l.children.splice(1),l.draw(),r.off("click");var e=new Konva.Rect({x:50,y:45,width:400,height:200,fill:"#FACD91"}),n=new Konva.Text({x:50,y:75,text:"2.漫反射：\n平行光经界面反射后向各个不同\n的方向反射出去，即在各个不同\n的方向都能接收到反射光线（反\n射面是粗糙平面或曲面） ",fontSize:28,fill:"#333",storke:"#333"});l.add(e),l.add(n);var t=new Image;t.src="./images/man.jpeg",t.onload=function(){var e=new Konva.Image({x:70,y:305,image:t,width:360,height:260});l.add(e),l.draw()},l.draw(),r.on("click",u)}function u(){l.children.splice(1),l.draw(),r.off("click");var e=new Konva.Rect({x:90,y:175,width:300,height:300,fill:"#FACD91"}),n=new Konva.Text({x:100,y:265,text:"现在初步认识了两种光\n的反射，让我们主要学\n习基于镜面反射的知识\n吧！",fontSize:28,fill:"#333",storke:"#333"});l.add(e),l.add(n),l.draw(),r.on("click",w)}function g(){for(let n=0;n<11;n++){var e=new Konva.Line({points:[0,50*(n+1),500,50*(n+1)],stroke:"#D7D7D7",tension:1});e.dash([5,2]),l.add(e)}for(let e=0;e<10;e++){var n=new Konva.Line({points:[50*(e+1),0,50*(e+1),550],stroke:"#D7D7D7",tension:1});n.dash([5,2]),l.add(n)}}function h(e,n,t,o){var i=new Konva.Rect({x:e,y:n,width:t,height:o,fill:"#555555"});l.add(i),l.draw()}function w(){r.off("click"),l.children.splice(1),l.draw();var e=new Image;e.src="./images/1.png",e.onload=function(){var n=new Konva.Image({x:0,y:0,image:e,width:500,height:580});l.add(n),l.draw()},r.on("click",v)}function v(){r.off("click"),l.children.splice(1),l.draw();var e=new Image;e.src="./images/2.png",e.onload=function(){var n=new Konva.Image({x:0,y:0,image:e,width:500,height:580});l.add(n),l.draw()},r.on("click",m)}function m(){r.off("click"),l.children.splice(1),l.draw();var e=new Image;e.src="./images/3.png",e.onload=function(){var n=new Konva.Image({x:0,y:0,image:e,width:500,height:580});l.add(n),l.draw()},r.on("click",p)}function p(){r.off("click"),l.children.splice(1),l.draw();var e=new Image;e.src="./images/4.png",e.onload=function(){var n=new Konva.Image({x:0,y:0,image:e,width:500,height:580});l.add(n),l.draw()},r.on("click",x)}function x(){r.off("click"),l.children.splice(1),l.draw();var e=new Konva.Rect({x:90,y:175,width:300,height:300,fill:"#FACD91"}),n=new Konva.Text({x:100,y:265,text:"为了巩固刚刚学到的反\n射知识，下面再来看一\n个入射角不同的例子",fontSize:28,fill:"#333",storke:"#333"});l.add(e),l.add(n),l.draw(),r.on("click",y)}function y(){r.off("click"),l.children.splice(1),l.draw();var e=new Image;e.src="./images/5.png",e.onload=function(){var n=new Konva.Image({x:0,y:0,image:e,width:500,height:580});l.add(n),l.draw()},r.on("click",k)}function k(){r.off("click"),l.children.splice(1),l.draw();var e=new Konva.Rect({x:90,y:175,width:300,height:300,fill:"#FACD91"}),n=new Konva.Text({x:100,y:265,text:"现在初步认识了两种光\n的反射，来开始基于镜\n面反射的演示游戏吧！",fontSize:28,fill:"#333",storke:"#333"});l.add(e),l.add(n),l.draw(),r.on("click",K)}function K(){r.off("click"),l.children.splice(1),l.draw();var e=new Konva.Rect({x:90,y:175,width:300,height:300,fill:"#FACD91"}),n=new Konva.Text({x:100,y:265,text:"假设猫是发光源，老鼠\n不能动，猫可以沿着光\n线移动，需要指定数量\n的镜子当做反射面引导\n猫捉到老鼠",fontSize:28,fill:"#333",storke:"#333"});l.add(e),l.add(n),l.draw(),r.on("click",S)}function F(e){for(let t=0;t<=e;t++){var n={points:[300,600,350,650],stroke:"#FFFF00",tension:1,draggable:0!==t,strokeWidth:6},i=new Konva.Line(n);i.on("mouseover",(function(){document.body.style.cursor="pointer"})),i.on("mouseout",(function(){document.body.style.cursor="default"})),l.add(i),i.on("dragend",b),i.on("dragstart",T),i.on("dragmove",I)}var a;o=!1,a=new Konva.Text({x:330,y:600,text:"x"+t,fontSize:14,fill:"#fff",storke:"#fff",name:"number"}),l.add(a),l.draw()}function T(e){let n=50*Math.floor(e.evt.offsetX/50),t=50*Math.floor(e.evt.offsetY/50);for(let e=0;e<i.length;e++)if(i[e][0]===n&&i[e][1]===t){a=i[e][2],i.splice(e,1);break}}function I(){o=!0}function b(e){if(o){o=!1,e.target.drag=!0;let n=-1;for(let e=0;e<l.children.length;e++){if(l.children[e].drag){n=e;break}}l.children.splice(n,1);let r=50*Math.floor(e.evt.offsetX/50),d=50*Math.floor(e.evt.offsetY/50),c=new Konva.Line({points:a?[r,d,r+50,d+50]:[r+50,d,r,d+50],stroke:"#FFFF00",tension:1,draggable:!0,strokeWidth:6});c.on("mouseover",(function(){document.body.style.cursor="pointer"})),c.on("mouseout",(function(){document.body.style.cursor="default"})),c.on("dragend",b),c.on("dragmove",I),c.on("dragstart",T),i.push([r,d,a]),l.add(c);let f=-1;for(let e=0;e<l.children.length;e++){if(l.children[e].attrs.name){f=e;break}}l.children.splice(f,1);let s=t-i.length,u=new Konva.Text({x:330,y:600,text:"x"+s,fontSize:14,fill:"#fff",storke:"#fff",name:"number"});l.add(u),l.draw(),a=!0}else if(e.evt.offsetX>=0&&e.evt.offsetX<=500&&e.evt.offsetY>=0&&e.evt.offsetY<=550){e.target.change=!0;let n=-1;for(let e=0;e<l.children.length;e++){if(l.children[e].change){n=e;break}}l.children.splice(n,1);let t=!0,o=50*Math.floor(e.evt.offsetX/50),a=50*Math.floor(e.evt.offsetY/50);for(let e=0;e<i.length;e++)if(i[e][0]===o&&i[e][1]===a){t=i[e][2],i.splice(e,1);break}i.push([o,a,!t]);let r=new Konva.Line({points:t?[o+50,a,o,a+50]:[o,a,o+50,a+50],stroke:"#FFFF00",tension:1,draggable:!0,strokeWidth:6});r.on("mouseover",(function(){document.body.style.cursor="pointer"})),r.on("mouseout",(function(){document.body.style.cursor="default"})),r.on("dragend",b),r.on("dragmove",I),r.on("dragstart",T),l.add(r),l.draw()}}function S(){var e;r.off("click"),l.children.splice(1),g(),h(150,200,200,150),function(){var e=new Image;e.src="./images/cat.jpg",e.onload=function(){var n=new Konva.Image({x:50,y:250,image:e,width:50,height:50});l.add(n),l.draw()};var n=new Image;n.src="./images/mouse.jpg",n.onload=function(){var e=new Konva.Image({x:400,y:250,image:n,width:50,height:50});l.add(e),l.draw()}}(),l.draw(),F(2),(e=new Konva.RegularPolygon({x:460,y:620,sides:3,radius:30,fill:"#699BC8",strokeWidth:4,rotation:90})).on("mouseover",(function(){document.body.style.cursor="pointer"})),e.on("mouseout",(function(){document.body.style.cursor="default"})),e.on("click",D),l.add(e),l.draw()}function z(e,n,t,o,i="#95F204"){var a=new Konva.Arrow({points:[e,n,t,o],pointerLength:20,pointerWidth:20,fill:i,stroke:i,strokeWidth:4,name:"light"});l.add(a),l.draw()}function j(e){l.children.splice(1);var n=new Konva.Text({x:100,y:270,text:"不好意思您失败了，\n请点击屏幕重新开始",fontSize:34,fill:"#FFFF00",storke:"#FFFF00"});l.add(n),l.draw(),1===e?(r.on("click",S),i=[],t=2):(r.on("click",R),i=[],t=4)}function D(){let e=[],n=[],t=[];if(i.forEach(o=>{e.push(o[0]),n.push(o[1]),t.push(o[2])}),e.indexOf(50)>=0){let o=e.indexOf(50),i=n[o];if(i<200)if(z(75,250,75,i+25),t[o])z(75,i+25,0,i+25),setTimeout(()=>{j(1)},500);else if(e.splice(o,1),n.splice(o,1),t.splice(o,1),e.length>0)if(n.includes(i)){let o=n.indexOf(i),a=e[o],r=t[o];z(75,i+25,a+25,i+25),r?100===a?(z(a+25,i+25,a+25,550),setTimeout(()=>{j(1)},500)):150===a||200===a||250===a||300===a?(z(a+25,i+25,a+25,200),setTimeout(()=>{j(1)},500)):350===a||450===a?(z(a+25,i+25,a+25,550),setTimeout(()=>{j(1)},500)):(z(a+25,i+25,a+25,250),setTimeout(()=>{C()},1e3)):(z(a+25,i+25,a+25,0),setTimeout(()=>{j(1)},500))}else z(75,i+25,500,i+25),setTimeout(()=>{j(1)},500);else z(75,i+25,500,i+25),setTimeout(()=>{j(1)},500);if(i>300)if(z(75,300,75,i+25),t[o])if(e.splice(o,1),n.splice(o,1),t.splice(o,1),e.length>0)if(n.includes(i)){let o=n.indexOf(i),a=e[o],r=t[o];z(75,i+25,a+25,i+25),r?(z(a+25,i+25,a+25,550),setTimeout(()=>{j(1)},500)):100===a?(z(a+25,i+25,a+25,0),setTimeout(()=>{j(1)},500)):150===a||200===a||250===a||300===a?(z(a+25,i+25,a+25,350),setTimeout(()=>{j(1)},500)):350===a||450===a?(z(a+25,i+25,a+25,0),setTimeout(()=>{j(1)},500)):(z(a+25,i+25,a+25,300),setTimeout(()=>{C()},1e3))}else z(75,i+25,500,i+25),setTimeout(()=>{j(1)},500);else z(75,i+25,500,i+25),setTimeout(()=>{j(1)},500);else z(75,i+25,0,i+25),setTimeout(()=>{j(1)},500)}else z(75,250,75,0),z(75,300,75,550),setTimeout(()=>{j(1)},500)}function C(){l.children.splice(1);var e=new Image;e.src="./images/good.jpg",e.onload=function(){var n=new Konva.Image({x:150,y:20,image:e,width:200,height:200});l.add(n);var t=new Konva.Text({x:150,y:270,text:"Congratulations\n你太棒了！\n第二关稍加了点\n难度，加油哦！",fontSize:34,fill:"#FFFF00",storke:"#FFFF00"});r.on("click",R),l.add(t),l.draw()}}function R(){var e;t=4,i=[],r.off("click"),l.children.splice(1),g(),h(200,50,150,50),h(200,200,150,150),h(200,450,150,50),function(){var e=new Image;e.src="./images/police.jpg",e.onload=function(){var n=new Konva.Image({x:250,y:200,image:e,width:50,height:50});l.add(n),l.draw()};var n=new Image;n.src="./images/thief.jpg",n.onload=function(){var e=new Konva.Image({x:250,y:300,image:n,width:50,height:50});l.add(e),l.draw()}}(),l.draw(),F(4),(e=new Konva.RegularPolygon({x:460,y:620,sides:3,radius:30,fill:"#699BC8",strokeWidth:4,rotation:90})).on("mouseover",(function(){document.body.style.cursor="pointer"})),e.on("mouseout",(function(){document.body.style.cursor="default"})),e.on("click",A),l.add(e),l.draw()}function A(){const e=i.filter(e=>250===e[0]).filter(e=>e[1]>300);if(e.length>0){z(275,350,275,e[0][1]+25);for(let n=0;n<i.length;n++)250===i[n][0]&&i[n][1]===e[0][1]&&(i.splice(n,1),n--);if(e[0][2]){const n=i.filter(n=>n[1]===e[0][1]).filter(e=>e[0]>250);if(n.length>0){z(275,e[0][1]+25,n[0][0]+25,e[0][1]+25);for(let t=0;t<i.length;t++)i[t][0]===n[0][0]&&i[t][1]===e[0][1]&&(i.splice(t,1),t--);if(n[0][2])setTimeout(()=>{j(2)},500);else{const t=i.filter(e=>e[0]===n[0][0]).filter(e=>e[1]<200&&e[1]>50);if(t.length>0){z(n[0][0]+25,e[0][1]+25,n[0][0]+25,t[0][1]+25);for(let e=0;e<i.length;e++)i[e][0]===n[0][0]&&i[e][1]===t[0][1]&&(i.splice(e,1),e--);if(t[0][2]){const e=i.filter(e=>e[1]===t[0][1]).filter(e=>250===e[0]);e.length>0&&(z(n[0][0]+25,t[0][1]+25,275,t[0][1]+25),e[0][2]?(z(275,t[0][1]+25,275,100),setTimeout(()=>{j(2)},500)):(z(275,t[0][1]+25,275,200),setTimeout(()=>{O()},1e3)))}else z(n[0][0]+25,t[0][1]+25,n[0][0]+25,500),setTimeout(()=>{j(2)},500)}else z(n[0][0]+25,e[0][1]+25,n[0][0]+25,0),setTimeout(()=>{j(2)},500)}}else z(275,e[0][1]+25,500,e[0][1]+25),setTimeout(()=>{j(2)},500)}else{const n=i.filter(n=>n[1]===e[0][1]).filter(e=>e[0]<250);if(n.length>0){z(275,e[0][1]+25,n[0][0]+25,e[0][1]+25);for(let t=0;t<i.length;t++)i[t][0]===n[0][0]&&i[t][1]===e[0][1]&&(i.splice(t,1),t--);if(n[0][2]){const t=i.filter(e=>e[0]===n[0][0]).filter(e=>e[1]<200&&e[1]>50);if(t.length>0){z(n[0][0]+25,e[0][1]+25,n[0][0]+25,t[0][1]+25);for(let e=0;e<i.length;e++)i[e][0]===n[0][0]&&i[e][1]===t[0][1]&&(i.splice(e,1),e--);if(t[0][2])z(n[0][0]+25,t[0][1]+25,n[0][0]+25,500),setTimeout(()=>{j(2)},500);else{const e=i.filter(e=>e[1]===t[0][1]).filter(e=>250===e[0]);e.length>0&&(z(n[0][0]+25,t[0][1]+25,275,t[0][1]+25),e[0][2]?(z(275,t[0][1]+25,275,200),setTimeout(()=>{O()},1e3)):(z(275,t[0][1]+25,275,100),setTimeout(()=>{j(2)},500)))}}else z(n[0][0]+25,e[0][1]+25,n[0][0]+25,0),setTimeout(()=>{j(2)},500)}else setTimeout(()=>{j(2)},500)}else z(275,e[0][1]+25,0,e[0][1]+25)}}else z(275,350,275,450),setTimeout(()=>{j(2)},500)}function O(){l.children.splice(1);var e=new Image;e.src="./images/good.jpg",e.onload=function(){var n=new Konva.Image({x:150,y:20,image:e,width:200,height:200});l.add(n);var t=new Konva.Text({x:150,y:270,text:"Congratulations\n你太棒了！\n\n通过二关游戏，你\n已经充分掌握了\n光的反射原理，\n下面让我们学习\n光的折射",fontSize:34,fill:"#FFFF00",storke:"#FFFF00"});r.on("click",M),l.add(t),l.draw()}}function M(){r.off("click"),l.children.splice(1),l.draw();var e=new Konva.Rect({x:90,y:175,width:300,height:300,fill:"#FACD91"}),n=new Konva.Text({x:100,y:265,text:"前面我们熟悉了光的反\n射，下面来了解光的\n折射",fontSize:28,fill:"#333",storke:"#333"});l.add(e),l.add(n),l.draw(),r.on("click",L)}function L(){r.off("click"),l.children.splice(1),l.draw();var e=new Konva.Rect({x:20,y:15,width:460,height:120,fill:"#FACD91"}),n=new Konva.Text({x:50,y:35,text:"光的折射：光从一种介质射入另\n一种介质时，传播放心会发生偏\n折，这种现象就叫做光的折射",fontSize:28,fill:"#333",storke:"#333"});l.add(e),l.add(n);var t=new Image;t.src="./images/mirror.jpeg",t.onload=function(){var e=new Konva.Image({x:20,y:175,image:t,width:230,height:200});l.add(e),l.draw()};var o=new Image;o.src="./images/zheshe1.jpg",o.onload=function(){var e=new Konva.Image({x:255,y:175,image:o,width:225,height:200});l.add(e),l.draw()};var i=new Konva.Rect({x:20,y:415,width:460,height:200,fill:"#FACD91"}),a=new Konva.Text({x:30,y:435,text:"光的折射与光的反射一样都是发生在两种介质\n的交界处，只是反射光返回原介质中，\n而折射光则进入到另一种介质中。\n由于光在在两种不同的物质里传播速度不同，\n故在两种介质的交界处传播方向\n发生变化，这就是光的折射",fontSize:22,fill:"#333",storke:"#333"});l.add(i),l.add(a),l.draw(),r.on("click",P)}function P(){r.off("click"),l.children.splice(1),l.draw();var e=new Image;e.src="./images/zheshe2.png",e.onload=function(){var n=new Konva.Image({x:0,y:0,image:e,width:500,height:580});l.add(n),l.draw()},r.on("click",W)}function W(){r.off("click"),l.children.splice(1),l.draw();var e=new Image;e.src="./images/zheshe3.png",e.onload=function(){var n=new Konva.Image({x:0,y:0,image:e,width:500,height:580});l.add(n),l.draw()},r.on("click",p)}l.add(c),l.add(f),l.draw(),r.on("click",(function(){l.children.splice(1,2),l.draw(),r.off("click");var e=new Konva.Rect({x:50,y:45,width:400,height:200,fill:"#FACD91"}),n=new Konva.Text({x:50,y:75,text:"1.镜面反射：平行光线经界面反\n射后沿某一方向平行射出，只能\n在某一方向接收到反射光线\n（反射面是光滑平面）",fontSize:28,fill:"#333",storke:"#333"});l.add(e),l.add(n);var t=new Image;t.src="./images/mirror.jpeg",t.onload=function(){var e=new Konva.Image({x:70,y:305,image:t,width:360,height:260});l.add(e),l.draw()},l.draw(),r.on("click",s)}))}]);